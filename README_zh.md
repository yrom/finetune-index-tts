# IndexTTS å¾®è°ƒç¤ºä¾‹

[English Version](README.md)

æœ¬é¡¹ç›®æ˜¯ä¸ªç¤ºä¾‹é¡¹ç›®ï¼Œæ—¨åœ¨å¯¹ [IndexTTS](https://github.com/index-tts/index-tts) è¿›è¡Œå¾®è°ƒï¼Œä½¿å…¶èƒ½å¤Ÿè¯†åˆ«å¹¶ç”Ÿæˆå¸¦æœ‰ç‰¹æ®Šæ ‡ç­¾ï¼ˆå¦‚ `<GIGGLES>`ï¼‰çš„è¯­éŸ³éŸ³é¢‘ï¼Œå®ç°å¦‚ç¬‘å£°ç­‰æƒ…æ„Ÿæˆ–éæ–‡æœ¬å…ƒç´ çš„åˆæˆã€‚

> [!NOTE]
> æœ¬é¡¹ç›®ä»…ä¸ºç¤ºä¾‹ï¼Œå®é™…åº”ç”¨ä¸­è¯·æ ¹æ®å…·ä½“éœ€æ±‚è¿›è¡Œè°ƒæ•´å’Œä¼˜åŒ–ã€‚  
> å¾®è°ƒè¯¦ç»†æ€è·¯å¯ä»¥æŸ¥çœ‹æˆ‘çš„blogï¼š[ã€Šå¾®è°ƒIndexTTSä»¥è¾“å‡ºå¯æ§æƒ…ç»ªçš„è¯­è¨€éŸ³é¢‘ã€‹](https://yrom.net/blog/2025/06/15/finetune-indextts-to-generate-controllable-emotions-speech/)

## é¡¹ç›®ç›®æ ‡

- ç¤ºä¾‹å¦‚ä½•å¯¹ IndexTTS çš„æ–‡æœ¬ Tokenizerå’Œè‡ªå›å½’æ¨¡å‹éƒ¨åˆ†ï¼ˆGPT2ï¼‰è¿›è¡Œå¾®è°ƒ
- æ”¯æŒåœ¨æ–‡æœ¬ä¸­æ’å…¥å¦‚ `<GIGGLES>` ç­‰ç‰¹æ®Šæ ‡ç­¾ï¼Œä»¥ç”Ÿæˆå¯¹åº”çš„ç¬‘å£°æˆ–å…¶ä»–éŸ³æ•ˆã€‚

### å¾®è°ƒæ•°æ®é›†

[ğŸ¤— MrDragonFox/Elise](https://huggingface.co/datasets/MrDragonFox/Elise)ï¼ˆmodelscope çš„[é•œåƒ](https://www.modelscope.cn/datasets/RealmSky/Elise) ï¼‰

### å¾®è°ƒå®éªŒç»“æœç¤ºä¾‹

| å‚è€ƒéŸ³é¢‘ | æ–‡æœ¬ | è¯­éŸ³ |
| --- | --- | --- |
|[Female-1][Female_1]| Seriously? &lt;giggles> That's the cutest thing I've ever heard! | [Synthesized Speech](samples/Female-1_SeriouslygigglesThatsthecutestt.wav) |
| [Female-1][Female_1] | çœŸçš„å—ï¼Ÿ &lt;giggles> è¿™ä¹Ÿå¤ªå¯çˆ±äº†å§ï¼| [Synthesized Speech](samples/Female-1_çœŸçš„å—gigglesè¿™ä¹Ÿå¤ªå¯çˆ±äº†å§.wav) |
| [Male-1][Male_1]| Whaâ€”? Cute? &lt;giggles> You think I'm cute?! Well, uh, thanks, I guess? | [Synthesized Speech](samples/Male-1_Whaâ€”CutegigglesYouthinkImcute.wav) |
| [Male-1][Male_1]| å“å‘€! å¿˜äº†ä»–è¿˜åœ¨é‚£ç­‰æˆ‘ä»¬å‘¢ï¼&lt;giggles> æˆ‘ä»¬ä¸¤ä¸ªåŠ¨ä½œå¾—å¿«ç‚¹äº†ï¼| [Synthesized Speech](samples/Male-1_å“å‘€å¿˜äº†ä»–è¿˜åœ¨é‚£ç­‰æˆ‘ä»¬å‘¢gigglesæˆ‘ä»¬ä¸¤ä¸ªåŠ¨ä½œå¾—å¿«ç‚¹äº†.wav) |

### IndexTTS æ¨¡å‹æ¶æ„

```mermaid
flowchart TD
    D("å‚è€ƒæ–‡æœ¬") -->BPE[[**BPE**]] --> T(æ–‡æœ¬ Token ID)
    A("å‚è€ƒè¯­éŸ³") --> M(Mel-Spectrogram) --> VAE[[*DiscreteVAE*]]--> B(Mel-Spec ç¼–ç  ID)
    A -->CE[[*Conformer Encoder*]] --> Pe[[*Perceiver Resampler*]] --> CA(å‚è€ƒè¯­éŸ³ä¸Šä¸‹æ–‡å‘é‡) -->|ä¸Šä¸‹æ–‡æ¡ä»¶| C
    B --> C
    T --> C[[**GPT2**]]
    C --> L("ç›®æ ‡è¯­éŸ³çš„æ½œåœ¨è¡¨ç¤º
*éšè—çŠ¶æ€*")
    L --> V[["*BigVGAN*
    (Generator)"]]
    A --> SP[[*ECAPA-TDNN*]]--> S(è¯´è¯äºº Embedding)
    S --> V
    V -->|åˆæˆ| PCM("éŸ³é¢‘æ³¢å½¢ (PCM)") --> W("è¯­éŸ³éŸ³é¢‘")
```

### æœ¬é¡¹ç›®å¾®è°ƒçš„æ¨¡å—

- **BPE**: å®é™…ä¸º `sentencepiece`ï¼Œä¸ºå®ƒå¢åŠ æ–°çš„ç‰¹æ®Šæ ‡ç­¾ tokenï¼Œå¦‚ `<GIGGLES>` å…·ä½“è¿‡ç¨‹è¯·å‚è§ [preprocess_mel_dataset.ipynb](preprocess_mel_dataset.ipynb) ç¬”è®°æœ¬ã€‚
- **GPT2**: è‡ªå›å½’æ¨¡å‹éƒ¨åˆ†ï¼Œä½¿ç”¨ [ğŸ¤— peft](https://huggingface.co/docs/peft/v0.15.0/en/index) åº“è¿›è¡Œ`LoRA`å¾®è°ƒï¼Œæ”¯æŒç”Ÿæˆå¸¦æœ‰ç‰¹æ®Šæ ‡ç­¾æ–‡æœ¬çš„è¯­éŸ³ Latentï¼Œå…·ä½“è¿‡ç¨‹è¯·å‚è§ [fine_tune_indextts.ipynb](fine_tune_indextts.ipynb) ç¬”è®°æœ¬ã€‚


## Disclaimer

The reference audio files and the datasets used in this project are granted under the [CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/) license.
They are used for the research and demonstration purposes of this project only, and are not intended for any commercial use.
The synthesized audio files generated by this project are also not intended for commercial use.

[Female_1]: https://bytedancespeech.github.io/seedtts_tech_report/audios/SpeechFactorization_samples/prompt/prompt1/4813840990459345930.wav
[Male_1]: https://bytedancespeech.github.io/seedtts_tech_report/audios/SpeechFactorization_samples/source/2188769758301752050.wav

